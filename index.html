<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AxelSub - Anime Stream</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050510; --card: #121225; --primary: #00f3ff; --accent: #ff0055;
            --text: #fff; --muted: #a0a0b0; --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1); --nav-bg: rgba(5, 5, 16, 0.96);
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; line-height: 1.6; }

        /* Navbar & Dropdown */
        .nav { position: fixed; top: 0; width: 100%; padding: 0.8rem 5%; display: flex; justify-content: space-between; align-items: center; background: var(--nav-bg); backdrop-filter: blur(25px); border-bottom: 1px solid var(--border); z-index: 1000; }
        .logo { font-size: 1.8rem; font-weight: 800; display: flex; align-items: center; gap: 10px; cursor: pointer; text-decoration: none; color: inherit; }
        .logo span { color: var(--primary); }
        .logo img { width: 36px; height: 36px; border-radius: 50%; border: 2px solid var(--primary); }

        .nav-menu { display: flex; align-items: center; gap: 0.5rem; }
        .nav-link, .dropdown-btn { color: var(--muted); font-weight: 600; padding: 0.6rem 1.1rem; background: none; border: none; cursor: pointer; border-radius: 8px; transition: 0.3s; text-decoration: none; font-family: inherit; }
        .nav-link:hover, .nav-link.active, .dropdown-btn:hover { color: var(--text); background: var(--glass); }

        .dropdown { position: relative; }
        .dropdown-menu { display: none; position: absolute; top: 100%; left: 0; background: rgba(18, 18, 37, 0.98); border-radius: 12px; border: 1px solid var(--border); min-width: 170px; padding: 0.5rem 0; margin-top: 0.5rem; }
        .dropdown:hover .dropdown-menu { display: block; }
        .dropdown-menu a { display: block; padding: 0.7rem 1.2rem; color: var(--muted); text-decoration: none; font-size: 0.9rem; }
        .dropdown-menu a:hover { background: var(--glass); color: var(--primary); }

        .search { background: var(--glass); padding: 0.5rem 1.1rem; border-radius: 50px; border: 1px solid var(--border); display: flex; align-items: center; gap: 8px; margin-left: 1rem; }
        .search input { background: none; border: none; color: var(--text); outline: none; width: 130px; font-family: inherit; }

        /* Hero Section */
        .hero { min-height: 80vh; display: flex; align-items: center; padding: 120px 5% 60px; position: relative; overflow: hidden; }
        .hero-bg { position: absolute; top: 0; right: 0; width: 65%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 0; mask-image: linear-gradient(to right, transparent, black 60%); -webkit-mask-image: linear-gradient(to right, transparent, black 60%); transition: 1s; }
        .hero-content { position: relative; z-index: 1; max-width: 700px; }
        .btn-play { padding: 1.1rem 2.8rem; border-radius: 50px; background: var(--primary); color: #000; border: none; font-weight: 800; cursor: pointer; transition: 0.3s; font-size: 1.1rem; box-shadow: 0 0 20px rgba(0, 243, 255, 0.3); }
        .btn-play:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0, 243, 255, 0.5); }

        /* Anime Grid */
        .container { padding: 4rem 5%; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 2.5rem; }
        .card { background: var(--card); border-radius: 20px; overflow: hidden; position: relative; cursor: pointer; border: 1px solid var(--border); transition: 0.4s; height: 320px; }
        .card:hover { transform: translateY(-10px); border-color: var(--primary); }
        .card img { width: 100%; height: 100%; object-fit: cover; }
        .card-badge { position: absolute; top: 1rem; right: 1rem; background: rgba(5, 5, 16, 0.85); padding: 0.4rem 0.8rem; border-radius: 10px; font-size: 0.75rem; font-weight: 800; color: var(--primary); z-index: 5; }
        .card-info { position: absolute; bottom: 0; width: 100%; padding: 1.5rem; background: linear-gradient(transparent, #050510); z-index: 10; }

        /* Modal & Players */
        .modal { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.98); z-index: 2000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(20px); }
        .modal.open { display: flex; }
        .player-wrap { width: 95%; max-width: 1150px; aspect-ratio: 16/9; background: #000; border-radius: 20px; overflow: hidden; position: relative; border: 1px solid var(--border); }
        #videoIframe, #videoNative { width: 100%; height: 100%; display: none; border: none; }
        .close-btn { position: absolute; top: 1.5rem; right: 1.5rem; width: 45px; height: 45px; background: var(--accent); color: #fff; border: none; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: 900; z-index: 2100; transition: 0.3s; }
        .close-btn:hover { transform: rotate(90deg) scale(1.1); }

        @media (max-width: 768px) { .grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; } .nav-menu { display: none; } }
    </style>
</head>
<body>

    <nav class="nav">
        <div class="logo" onclick="location.reload()">
            <img src="images/logo.png" onerror="this.src='https://via.placeholder.com/40'">
            AXEL<span>SUB</span>
        </div>
        <div class="nav-menu">
            <a href="#" class="nav-link active" onclick="location.reload()">Kezd≈ëlap</a>
            <div class="dropdown">
                <button class="dropdown-btn">Anime ‚ñæ</button>
                <div class="dropdown-menu">
                    <a href="#" onclick="filterBy('status', 'Akt√≠v')">Akt√≠v</a>
                    <a href="#" onclick="filterBy('status', 'Tervezett')">Tervezett</a>
                    <a href="#" onclick="filterBy('status', 'Befejezett')">Befejezett</a>
                </div>
            </div>
        </div>
        <div class="search">
            <input type="text" placeholder="Keres√©s..." id="searchInput">
        </div>
    </nav>

    <header class="hero">
        <div class="hero-bg" id="heroBg"></div>
        <div class="hero-content">
            <h1 id="heroTitle"><span>Bet√∂lt√©s...</span></h1>
            <p id="heroDesc">K√©rlek v√°rj...</p>
            <button class="btn-play" id="heroPlayBtn">‚ñ∂ Megn√©zem most</button>
        </div>
    </header>

    <div class="container">
        <h2 style="margin-bottom: 2.5rem;">üî• N√©pszer≈± Sorozatok</h2>
        <div class="grid" id="animeGrid"></div>
    </div>

    <div class="modal" id="videoModal">
        <button class="close-btn" onclick="stopPlayer()">‚úï</button>
        <div class="player-wrap">
            <iframe id="videoIframe" allowfullscreen scrolling="no"></iframe>
            <video id="videoNative" controls controlsList="nodownload" crossorigin="anonymous"></video>
        </div>
    </div>

    <script>
        const animeData = [
            {
                title: "Yusha Party wo Oidasareta Kiyoubinbou",
                ep: "1. r√©sz",
                img: "https://cdn.myanimelist.net/images/anime/1486/153135.jpg",
                url: "http://localhost:3000/uploads/1767456854638-Yusha%20Party%20wo%20Oidasareta%20Kiyoubinbou%201.resz.mp4",
                host: "Saj√°t Szerver",
                status: "Akt√≠v"
            },
            {
                title: "Kingdom 6. √©vad",
                ep: "13. r√©sz",
                img: "https://via.placeholder.com/320x450?text=Kingdom",
                url: "https://embed.indavideo.hu/player/video/f9e0a81177",
                host: "Indavideo",
                status: "befejezet"
            },
            {
                title: "Chitose-kun wa Ramune Bin no Naka",
                ep: "9. r√©sz",
                img: "https://cdn.myanimelist.net/images/anime/1252/140724.jpg",
                url: "https://embed.indavideo.hu/player/video/9839352e04",
                host: "Indavideo",
                status: "Tervezett"
            }
        ];

        const grid = document.getElementById('animeGrid');
        const modal = document.getElementById('videoModal');
        const iframe = document.getElementById('videoIframe');
        const video = document.getElementById('videoNative');
        let heroInterval;

        function init() {
            renderGrid(animeData);
            if(animeData.length > 0) {
                updateHero(animeData[0]);
                startHeroSlider();
            }
        }

        function renderGrid(data) {
            grid.innerHTML = '';
            data.forEach(a => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-badge">${a.status}</div>
                    <img src="${a.img}">
                    <div class="card-info">
                        <div style="font-weight:700">${a.title}</div>
                        <div style="font-size:0.8rem; color:var(--primary)">${a.ep} ‚Ä¢ ${a.host}</div>
                    </div>
                `;
                card.onclick = () => playPlayer(a.url);
                grid.appendChild(card);
            });
        }

        window.playPlayer = function(url) {
            if(!url) return;
            stopHeroSlider();
            iframe.style.display = 'none'; iframe.src = "";
            video.style.display = 'none'; video.pause(); video.src = "";

            if(url.includes('indavideo.hu') || url.includes('voe.sx')) {
                let finalUrl = url;
                if(url.includes('indavideo.hu') && !url.includes('embed.')) 
                    finalUrl = url.replace('indavideo.hu/video/', 'embed.indavideo.hu/player/video/');
                if(url.includes('voe.sx') && !url.includes('/e/')) 
                    finalUrl = url.replace('voe.sx/', 'voe.sx/e/');
                
                iframe.src = finalUrl;
                iframe.style.display = 'block';
            } else {
                video.src = url;
                video.style.display = 'block';
                video.load();
                video.play();
            }
            modal.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        window.stopPlayer = function() {
            modal.classList.remove('open');
            iframe.src = ""; video.pause(); video.src = "";
            document.body.style.overflow = '';
            startHeroSlider();
        }

        function updateHero(item) {
            document.getElementById("heroTitle").innerHTML = `<span>${item.title}</span>`;
            document.getElementById("heroDesc").innerText = item.ep;
            document.getElementById("heroBg").style.backgroundImage = `url(${item.img})`;
            document.getElementById("heroPlayBtn").onclick = () => playPlayer(item.url);
        }

        function startHeroSlider() {
            let i = 0;
            heroInterval = setInterval(() => {
                i = (i + 1) % animeData.length;
                updateHero(animeData[i]);
            }, 6000);
        }

        function stopHeroSlider() { clearInterval(heroInterval); }

        window.filterBy = function(key, val) {
            renderGrid(animeData.filter(a => a[key] === val));
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            renderGrid(animeData.filter(a => a.title.toLowerCase().includes(val)));
        });

        window.onload = init;
        window.onclick = (e) => { if(e.target === modal) stopPlayer(); }
    </script>
</body>
</html>
